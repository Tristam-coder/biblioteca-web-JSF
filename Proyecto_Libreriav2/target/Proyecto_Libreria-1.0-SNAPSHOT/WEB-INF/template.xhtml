<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title><ui:insert name="titulo">Sistema de Biblioteca</ui:insert></title>

        <!-- PrimeFaces Theme -->
        <h:outputStylesheet name="primeicons/primeicons.css" library="primefaces"/>

        <!-- Custom CSS -->
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            html, body {
                height: 100%;
            }

            body {
                background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
                line-height: 1.6;
                color: #333;
                display: flex;
                flex-direction: column;
                min-height: 100vh;
            }

            .container {
                max-width: 1400px;
                margin: 0 auto;
                padding: 0 15px;
            }

            .custom-menubar {
                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%) !important;
                border: none !important;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
            }

            .custom-menubar .ui-menuitem-link {
                color: rgba(255, 255, 255, 0.95) !important;
                font-weight: 500 !important;
                transition: all 0.3s ease !important;
            }

            .custom-menubar .ui-menuitem-link:hover {
                background: rgba(52, 152, 219, 0.2) !important;
                color: #3498db !important;
                border-radius: 4px !important;
            }

            .custom-menubar .ui-menuitem-link.ui-state-active {
                background: #3498db !important;
                border-radius: 4px !important;
            }

            .content-wrapper {
                padding: 30px;
                background-color: white;
                border-radius: 12px;
                box-shadow: 0 8px 32px rgba(0,0,0,0.1);
                margin-bottom: 30px;
                flex: 1;
            }

            .page-header {
                margin-bottom: 30px;
                padding-bottom: 20px;
                border-bottom: 3px solid #3498db;
            }

            .page-header h1 {
                color: #2c3e50;
                font-size: 2.5rem;
                margin: 0 0 10px 0;
                font-weight: 700;
            }

            .page-header p {
                color: #7f8c8d;
                font-size: 1.1rem;
                margin: 0;
            }

            .breadcrumb {
                background-color: transparent !important;
                padding-left: 0 !important;
                margin-bottom: 1rem;
            }

            .breadcrumb-item {
                color: #7f8c8d;
            }

            .breadcrumb-item a {
                color: #3498db;
                text-decoration: none;
                transition: color 0.3s ease;
            }

            .breadcrumb-item a:hover {
                color: #2980b9;
                text-decoration: underline;
            }

            .btn-toolbar {
                margin-bottom: 20px;
            }

            .footer {
                margin-top: auto;
                padding: 30px 0;
                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                color: white;
                text-align: center;
                box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
                border-top: 1px solid rgba(255,255,255,0.1);
            }

            .footer p {
                margin: 0;
                font-size: 0.95rem;
                opacity: 0.9;
            }

            .table-responsive {
                margin-top: 20px;
                border-radius: 8px;
                overflow: hidden;
            }

            .badge-status {
                padding: 8px 12px;
                border-radius: 6px;
                font-size: 0.9rem;
                font-weight: 600;
                display: inline-block;
            }

            .badge-activo {
                background: linear-gradient(135deg, #28a745, #20c997);
                color: white;
            }

            .badge-inactivo {
                background: linear-gradient(135deg, #dc3545, #e74c3c);
                color: white;
            }

            .badge-disponible {
                background: linear-gradient(135deg, #17a2b8, #3498db);
                color: white;
            }

            .badge-prestado {
                background: linear-gradient(135deg, #ffc107, #f39c12);
                color: white;
            }

            .badge-descatalogado {
                background: linear-gradient(135deg, #6c757d, #495057);
                color: white;
            }

            /* PrimeFaces customization */
            .ui-messages {
                margin-bottom: 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            }

            .ui-message {
                border-radius: 6px;
                border-left: 4px solid;
            }

            .ui-message.ui-message-success {
                background: #d4edda;
                border-color: #28a745;
                color: #155724;
            }

            .ui-message.ui-message-error {
                background: #f8d7da;
                border-color: #dc3545;
                color: #721c24;
            }

            .ui-message.ui-message-warn {
                background: #fff3cd;
                border-color: #ffc107;
                color: #856404;
            }

            .ui-message.ui-message-info {
                background: #d1ecf1;
                border-color: #17a2b8;
                color: #0c5460;
            }

            /* Panel styling */
            .ui-panel {
                border: none !important;
                box-shadow: 0 4px 12px rgba(0,0,0,0.08) !important;
                border-radius: 8px !important;
            }

            .ui-panel .ui-panel-titlebar {
                background: linear-gradient(135deg, #3498db, #2980b9) !important;
                color: white !important;
                border-radius: 8px 8px 0 0 !important;
            }

            .ui-panel .ui-panel-content {
                padding: 20px !important;
            }

            /* DataTable styling */
            .ui-datatable {
                border: none !important;
                border-radius: 8px !important;
                box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
            }

            .ui-datatable .ui-datatable-thead > tr > th {
                background: linear-gradient(135deg, #3498db, #2980b9) !important;
                color: white !important;
                font-weight: 600 !important;
            }

            .ui-datatable .ui-datatable-tbody > tr:hover {
                background-color: rgba(52, 152, 219, 0.05) !important;
            }

            /* Form styling */
            .ui-inputtext, .ui-inputtextarea, .ui-selectonemenu {
                border: 2px solid #e0e0e0 !important;
                border-radius: 6px !important;
                padding: 10px 12px !important;
                font-size: 14px !important;
                transition: all 0.3s ease !important;
            }

            .ui-inputtext:focus, .ui-inputtextarea:focus, .ui-selectonemenu:focus {
                border-color: #3498db !important;
                box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1) !important;
            }

            /* Button styling */
            .ui-button {
                border-radius: 6px !important;
                font-weight: 600 !important;
                transition: all 0.3s ease !important;
                padding: 10px 16px !important;
            }

            .ui-button-success {
                background: linear-gradient(135deg, #28a745, #20c997) !important;
                border-color: #28a745 !important;
            }

            .ui-button-success:hover {
                background: linear-gradient(135deg, #20c997, #1aa179) !important;
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3) !important;
            }

            .ui-button-danger {
                background: linear-gradient(135deg, #dc3545, #e74c3c) !important;
                border-color: #dc3545 !important;
            }

            .ui-button-danger:hover {
                background: linear-gradient(135deg, #e74c3c, #c0392b) !important;
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3) !important;
            }

            .ui-button-warning {
                background: linear-gradient(135deg, #ffc107, #f39c12) !important;
                border-color: #ffc107 !important;
                color: #333 !important;
            }

            .ui-button-warning:hover {
                background: linear-gradient(135deg, #f39c12, #e67e22) !important;
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3) !important;
            }

            .ui-button-secondary {
                background: linear-gradient(135deg, #6c757d, #495057) !important;
                border-color: #6c757d !important;
            }

            .ui-button-secondary:hover {
                background: linear-gradient(135deg, #495057, #343a40) !important;
                transform: translateY(-2px);
            }

            /* Alert styling */
            .alert {
                border-radius: 8px !important;
                border-left: 4px solid !important;
                padding: 16px !important;
            }

            .alert-success {
                background-color: #d4edda;
                border-color: #28a745;
                color: #155724;
            }

            .alert-danger {
                background-color: #f8d7da;
                border-color: #dc3545;
                color: #721c24;
            }

            .alert-warning {
                background-color: #fff3cd;
                border-color: #ffc107;
                color: #856404;
            }

            .alert-info {
                background-color: #d1ecf1;
                border-color: #17a2b8;
                color: #0c5460;
            }

            /* Responsive adjustments */
            @media (max-width: 768px) {
                .page-header h1 {
                    font-size: 1.8rem;
                }

                .content-wrapper {
                    padding: 15px;
                }

                .container {
                    padding: 0 10px;
                }

                .ui-datatable .ui-datatable-thead > tr > th {
                    font-size: 0.9rem;
                }

                .ui-button {
                    padding: 8px 12px !important;
                    font-size: 0.9rem !important;
                }
            }

            /* Navigation positioning */
            .navbar-wrapper {
                background-color: #343a40;
                padding: 10px 0;
                margin-bottom: 70px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            }

            /* Custom utilities */
            .shadow-sm {
                box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
            }

            .shadow {
                box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
            }

            .rounded {
                border-radius: 8px !important;
            }

            .mb-4 {
                margin-bottom: 24px;
            }

            .mt-4 {
                margin-top: 24px;
            }

            .flex-grow-1 {
                flex: 1;
            }
        </style>

        <ui:insert name="css"/>
    </h:head>

    <h:body>
        <!-- Navbar container -->
        <div class="navbar-wrapper">
            <div class="container">
                <h:form>
                    <p:menubar styleClass="custom-menubar">
                        <p:menuitem value="Sistema de Biblioteca" style="font-weight: bold; font-size: 1.1rem; color: #3498db;" disabled="true"/>
                        <p:menuitem value="Inicio" icon="pi pi-home" url="#{request.contextPath}/index.xhtml"/>

                        <p:submenu label="Gestión" icon="pi pi-cog">
                            <p:menuitem value="Usuarios" icon="pi pi-users" url="#{request.contextPath}/pages/usuarios.xhtml"/>
                            <p:menuitem value="Obras" icon="pi pi-book" url="#{request.contextPath}/pages/obras.xhtml"/>
                            <p:menuitem value="Autores" icon="pi pi-pencil" url="#{request.contextPath}/pages/autores.xhtml"/>
                            <p:menuitem value="Editoriales" icon="pi pi-building" url="#{request.contextPath}/pages/editoriales.xhtml"/>
                            <p:separator/>
                            <p:menuitem value="Ejemplares" icon="pi pi-tag" url="#{request.contextPath}/pages/ejemplares.xhtml"/>
                        </p:submenu>

                        <p:submenu label="Operaciones" icon="pi pi-briefcase">
                            <p:menuitem value="Préstamos" icon="pi pi-refresh" url="#{request.contextPath}/pages/prestamos.xhtml"/>
                            <p:menuitem value="Reservas" icon="pi pi-clock" url="#{request.contextPath}/pages/reservas.xhtml"/>
                            <p:menuitem value="Multas" icon="pi pi-dollar" url="#{request.contextPath}/pages/multas.xhtml"/>
                        </p:submenu>

                        <p:submenu label="Consultas" icon="pi pi-search">
                            <p:menuitem value="Historial" icon="pi pi-list" url="#{request.contextPath}/pages/historial.xhtml"/>
                            <p:menuitem value="Notificaciones" icon="pi pi-bell" url="#{request.contextPath}/pages/notificaciones.xhtml"/>
                        </p:submenu>

                        <f:facet name="options">
                            <p:menuitem value="API REST" icon="pi pi-cloud" url="#{request.contextPath}/api" target="_blank"/>
                        </f:facet>
                    </p:menubar>
                </h:form>
            </div>
        </div>

        <!-- Mensajes Globales -->
        <div class="container">
            <p:messages id="mensajes" showDetail="true" closable="true" globalOnly="true"/>
        </div>

        <!-- Contenido Principal -->
        <div class="container flex-grow-1">
            <div class="content-wrapper">
                <ui:insert name="contenido">
                    <p>Contenido por defecto</p>
                </ui:insert>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="container">
                <p>© 2024 Sistema de Biblioteca - Desarrollado con Jakarta EE 10, JSF y PrimeFaces | Gestión Integral Bibliotecaria</p>
            </div>
        </div>

        <!-- Scripts -->
        <h:outputScript library="js" name="biblioteca.js"/>

        <ui:insert name="scripts"/>
    </h:body>
</html>

