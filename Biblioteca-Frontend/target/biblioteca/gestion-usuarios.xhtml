<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:b="http://bootsfaces.net/ui"
                template="/template.xhtml">

    <ui:define name="title">Gesti√≥n de Usuarios - Ediciones Saberum</ui:define>

    <ui:define name="content">
        <div class="container py-4">
            <div class="breadcrumb mb-4">
                <b:link value="Inicio" outcome="/index.xhtml"/>
                <span class="mx-2 text-muted">/</span>
                <span class="text-primary">Panel de Administraci√≥n</span>
            </div>
            
            <h1 class="mb-4">Panel de Administraci√≥n</h1>
            
            <b:panel title="B√∫squeda de Usuarios" look="primary" class="mb-4">
                <h:form>
                    <b:row>
                        <b:column col-md="8">
                            <b:inputText value="#{adminController.filtroBusqueda}" 
                                       placeholder="Buscar por nombre o email..."
                                       styleClass="w-100"/>
                        </b:column>
                        <b:column col-md="4" class="d-flex gap-2">
                            <b:commandButton value="üîç Buscar" 
                                           look="primary"
                                           action="#{adminController.buscarUsuarios}"
                                           styleClass="flex-fill"/>
                            <b:commandButton value="üîÑ Limpiar" 
                                           look="secondary"
                                           action="#{adminController.limpiarBusqueda}"
                                           styleClass="flex-fill"/>
                        </b:column>
                    </b:row>
                </h:form>
            </b:panel>
            
            <b:panel title="Gesti√≥n de Usuarios" look="primary">
                <h:form>
                    <b:dataTable value="#{adminController.listaUsuarios}" var="usuario"
                               styleClass="table table-striped table-hover" 
                               emptyMessage="No hay usuarios registrados">
                        <b:dataTableColumn label="Nombre" width="30%">
                            <h:outputText value="#{usuario.nombreCompleto}"/>
                        </b:dataTableColumn>
                        <b:dataTableColumn label="Email" width="30%">
                            <h:outputText value="#{usuario.email}"/>
                        </b:dataTableColumn>
                        <b:dataTableColumn label="Tel√©fono" width="20%">
                            <h:outputText value="#{usuario.telefono != null ? usuario.telefono : 'No registrado'}"/>
                        </b:dataTableColumn>
                        <b:dataTableColumn label="Acciones" width="20%">
                            <div class="btn-group btn-group-sm">
                                <b:commandButton value="‚úèÔ∏è" 
                                               look="primary" 
                                               size="xs"
                                               styleClass="me-1"
                                               title="Editar usuario"/>
                                <b:commandButton value="üóëÔ∏è" 
                                               look="danger" 
                                               size="xs"
                                               onclick="return confirm('¬øEst√° seguro de eliminar a #{usuario.nombreCompleto}?')"
                                               action="#{adminController.eliminarUsuario(usuario)}"
                                               title="Eliminar usuario"/>
                            </div>
                        </b:dataTableColumn>
                    </b:dataTable>
                </h:form>
            </b:panel>
        </div>
    </ui:define>
</ui:composition>