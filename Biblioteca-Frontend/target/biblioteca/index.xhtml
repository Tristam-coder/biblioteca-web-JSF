<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:b="http://bootsfaces.net/ui"
                template="/template.xhtml">

    <ui:define name="title">Ediciones Saberum - Inicio</ui:define>

    <ui:define name="content">
        <div class="container py-4">
            <div class="row justify-content-center">
                <div class="col-lg-10 text-center">
                    <div class="hero-section py-4 mb-4">
                        <h1 class="display-5 text-primary mb-3">Bienvenido a Ediciones Saberum</h1>
                        <p class="lead text-muted mb-4">
                            <em>Ven, lee y saborea el conocimiento</em>
                        </p>
                        
                        <div class="d-flex gap-3 justify-content-center flex-wrap mb-4">
                            <h:form style="display: inline;">
                                <b:commandButton value="Explorar Catálogo" 
                                                look="primary"
                                                size="lg"
                                                action="#{navigationController.goToCatalogo}"/>
                            </h:form>
                            
                            <h:form rendered="#{not sessionController.authenticated}" style="display: inline;">
                                <b:commandButton value="Registrarse" 
                                                look="outline-primary"
                                                size="lg"
                                                action="#{navigationController.goToRegistro}"/>
                            </h:form>
                        </div>
                    </div>
                    
                    <!-- Estadísticas rápidas -->
                    <div class="row mt-4">
                        <div class="col-md-3 mb-3">
                            <div class="card text-center border-0 shadow-sm h-100">
                                <div class="card-body py-4">
                                    <h3 class="text-primary mb-2" id="totalBooks">1500</h3>
                                    <p class="text-muted mb-0">Libros Disponibles</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card text-center border-0 shadow-sm h-100">
                                <div class="card-body py-4">
                                    <h3 class="text-success mb-2" id="activeLoans">87</h3>
                                    <p class="text-muted mb-0">Préstamos Activos</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card text-center border-0 shadow-sm h-100">
                                <div class="card-body py-4">
                                    <h3 class="text-info mb-2" id="totalUsers">450</h3>
                                    <p class="text-muted mb-0">Usuarios Registrados</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="card text-center border-0 shadow-sm h-100">
                                <div class="card-body py-4">
                                    <h3 class="text-warning mb-2" id="availableBooks">1250</h3>
                                    <p class="text-muted mb-0">Disponibles Hoy</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ✅ SECCIÓN LIBROS DESTACADOS - COMPLETAMENTE CORREGIDA -->
                    <div class="row mt-5">
                        <div class="col-12">
                            <h3 class="mb-4 text-center">Libros Destacados</h3>
                            <div class="row justify-content-center">
                                
                                <!-- ✅ LIBRO 1 - CIEN AÑOS DE SOLEDAD -->
                                <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6 mb-4">
                                    <div class="card book-card-index h-100 shadow-sm">
                                        <div class="card-body text-center d-flex flex-column p-3">
                                            <!-- ✅ IMAGEN CON CONTENEDOR FIJO -->
                                            <div class="image-container-index mb-3">
                                                <img src="#{request.contextPath}/resources/IMG/cien_años.jpg" 
                                                     class="book-cover-index"
                                                     alt="Cien Años de Soledad"/>
                                            </div>
                                            <h6 class="card-title fw-bold mb-2">Cien Años de Soledad</h6>
                                            <p class="card-text small text-muted mb-3">G. García Márquez</p>
                                            <div class="mt-auto">
                                                <span class="badge bg-success">Disponible</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- ✅ LIBRO 2 - 1984 -->
                                <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6 mb-4">
                                    <div class="card book-card-index h-100 shadow-sm">
                                        <div class="card-body text-center d-flex flex-column p-3">
                                            <div class="image-container-index mb-3">
                                                <img src="#{request.contextPath}/resources/IMG/1984.jpg" 
                                                     class="book-cover-index"
                                                     alt="1984"/>
                                            </div>
                                            <h6 class="card-title fw-bold mb-2">1984</h6>
                                            <p class="card-text small text-muted mb-3">George Orwell</p>
                                            <div class="mt-auto">
                                                <span class="badge bg-success">Disponible</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- ✅ LIBRO 3 - DON QUIJOTE -->
                                <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6 mb-4">
                                    <div class="card book-card-index h-100 shadow-sm">
                                        <div class="card-body text-center d-flex flex-column p-3">
                                            <div class="image-container-index mb-3">
                                                <img src="#{request.contextPath}/resources/IMG/don_quijote.jpg" 
                                                     class="book-cover-index"
                                                     alt="Don Quijote de la Mancha"/>
                                            </div>
                                            <h6 class="card-title fw-bold mb-2">Don Quijote</h6>
                                            <p class="card-text small text-muted mb-3">M. de Cervantes</p>
                                            <div class="mt-auto">
                                                <span class="badge bg-success">Disponible</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- ✅ LIBRO 4 - RAYUELA -->
                                <div class="col-xl-2 col-lg-3 col-md-4 col-sm-6 mb-4">
                                    <div class="card book-card-index h-100 shadow-sm">
                                        <div class="card-body text-center d-flex flex-column p-3">
                                            <div class="image-container-index mb-3">
                                                <img src="#{request.contextPath}/resources/IMG/rayuela.jpeg" 
                                                     class="book-cover-index"
                                                     alt="Rayuela"/>
                                            </div>
                                            <h6 class="card-title fw-bold mb-2">Rayuela</h6>
                                            <p class="card-text small text-muted mb-3">Julio Cortázar</p>
                                            <div class="mt-auto">
                                                <span class="badge bg-success">Disponible</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <script>
            $(document).ready(function() {
                loadStatistics();
            });
            
            function loadStatistics() {
                // Simular carga de estadísticas
                setTimeout(function() {
                    $('#totalBooks').text('1500');
                    $('#activeLoans').text('87');
                    $('#totalUsers').text('450');
                    $('#availableBooks').text('1250');
                }, 1000);
            }
        </script>
        
        <style>
            /* ✅ ESTILOS ESPECÍFICOS PARA INDEX - CONTROL ABSOLUTO */
            .book-card-index {
                border: none !important;
                border-radius: 12px !important;
                overflow: hidden !important;
                transition: all 0.3s ease !important;
                min-height: 320px !important;
                display: flex !important;
                flex-direction: column !important;
            }
            
            .book-card-index:hover {
                transform: translateY(-5px) !important;
                box-shadow: 0 10px 30px rgba(0,0,0,0.15) !important;
            }
            
            .book-card-index .card-body {
                padding: 1rem !important;
                display: flex !important;
                flex-direction: column !important;
                height: 100% !important;
                flex: 1 !important;
            }
            
            /* ✅ CONTENEDOR DE IMAGEN - CONTROL TOTAL */
            .image-container-index {
                width: 100% !important;
                height: 180px !important;
                overflow: hidden !important;
                border-radius: 8px !important;
                margin-bottom: 1rem !important;
                flex-shrink: 0 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                background: #f8f9fa !important;
            }
            
            /* ✅ IMAGEN - CONTROL ABSOLUTO */
            .book-cover-index {
                width: 100% !important;
                height: 100% !important;
                object-fit: cover !important;
                object-position: center !important;
                display: block !important;
                margin: 0 !important;
                padding: 0 !important;
                border-radius: 8px !important;
            }
            
            /* ✅ FORZAR TAMAÑOS EN DIFERENTES PANTALLAS */
            @media (max-width: 1200px) {
                .image-container-index {
                    height: 160px !important;
                }
            }
            
            @media (max-width: 768px) {
                .image-container-index {
                    height: 140px !important;
                }
            }
            
            @media (max-width: 576px) {
                .image-container-index {
                    height: 120px !important;
                }
            }
            
            /* ✅ GARANTIZAR QUE LAS COLUMNAS NO SE DESBORDEN */
            .col-xl-2, .col-lg-3, .col-md-4, .col-sm-6 {
                padding-left: 8px !important;
                padding-right: 8px !important;
            }
            
            .book-card-index .card-title {
                font-size: 0.9rem !important;
                line-height: 1.3 !important;
                margin-bottom: 0.5rem !important;
                flex-shrink: 0 !important;
            }
            
            .book-card-index .card-text {
                font-size: 0.8rem !important;
                margin-bottom: 1rem !important;
                flex-shrink: 0 !important;
            }
            
            .book-card-index .mt-auto {
                margin-top: auto !important;
                flex-shrink: 0 !important;
            }
        </style>
    </ui:define>
</ui:composition>