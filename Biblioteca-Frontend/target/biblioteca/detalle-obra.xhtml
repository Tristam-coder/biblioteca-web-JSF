<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:b="http://bootsfaces.net/ui"
                template="/template.xhtml">

    <ui:define name="title">Detalle del Libro - Ediciones Saberum</ui:define>

    <ui:define name="content">
        <div class="container py-4">
            <div class="breadcrumb mb-4">
                <b:link value="Inicio" outcome="/index.xhtml"/>
                <span class="mx-2 text-muted">/</span>
                <b:link value="Cat√°logo" outcome="/catalogo.xhtml"/>
                <span class="mx-2 text-muted">/</span>
                <span class="text-primary">Detalle del Libro</span>
            </div>

            <div class="row">
                <div class="col-md-4 text-center mb-4">
                    <h:graphicImage library="IMG" name="#{bookDetailController.libro.titulo.contains('Rayuela') ? 'rayuela.jpeg' : bookDetailController.libro.titulo.contains('1984') ? '1984.jpg' : bookDetailController.libro.titulo.contains('Don Quijote') ? 'don_quijote.jpg' : bookDetailController.libro.titulo.contains('La Casa') ? 'La_casa_es.jpg' : bookDetailController.libro.titulo.contains('El T√∫nel') ? 'paramo.jpg' : bookDetailController.libro.titulo.contains('Pedro P√°ramo') ? 'paramo.jpg' : 'cien_a√±os.jpg'}" 
                                  styleClass="img-fluid rounded shadow book-cover-img"
                                  alt="Portada del libro"/>
                    
                    <div class="availability-status mt-3">
                        <span class="badge bg-success fs-6 p-2">
                            <i class="fas fa-check-circle me-1"></i>
                            Disponible
                        </span>
                    </div>
                </div>
                <div class="col-md-8">
                    <h1 class="mb-2">#{bookDetailController.libro.titulo}</h1>
                    <p class="lead text-muted mb-4">por #{bookDetailController.libro.autor}</p>
                    
                    <div class="book-info mb-4">
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>ISBN:</strong> #{bookDetailController.libro.isbn}</p>
                                <p><strong>Idioma:</strong> #{bookDetailController.libro.idioma}</p>
                            </div>
                            <div class="col-md-6">
                                <p><strong>Estado:</strong> <span class="badge bg-success">Disponible</span></p>
                                <p><strong>Plazo de pr√©stamo:</strong> 15 d√≠as</p>
                            </div>
                        </div>
                        <div class="mt-3">
                            <strong>Descripci√≥n:</strong>
                            <p class="mt-2">#{bookDetailController.libro.descripcion}</p>
                        </div>
                    </div>

                    <h:form>
                        <b:commandButton value="üìñ Solicitar Pr√©stamo" 
                                       action="#{bookDetailController.solicitarPrestamo}"
                                       look="primary"
                                       size="lg"
                                       rendered="#{sessionController.authenticated}"
                                       styleClass="me-3 mb-2"/>
                        
                        <b:commandButton value="‚Ü∂ Volver al Cat√°logo" 
                                       action="#{navigationController.goToCatalogo}"
                                       look="outline-secondary"
                                       size="lg"
                                       styleClass="mb-2"/>
                    </h:form>

                    <div class="mt-3" rendered="#{not sessionController.authenticated}">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle me-2"></i>
                            Debes <b:link value="iniciar sesi√≥n" outcome="/login.xhtml"/> para solicitar pr√©stamos.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>