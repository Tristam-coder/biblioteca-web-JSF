<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:b="http://bootsfaces.net/ui"
      lang="es">

<h:head>
    <meta charset="UTF-8" />
    <title><ui:insert name="title">Ediciones Saberum</ui:insert></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <h:outputStylesheet library="webjars" name="bootstrap/5.3.2/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
    <h:outputStylesheet name="css/app.css"/>
    
    <style>
        /* ✅ SOLUCIÓN DIRECTA Y SIMPLE */

        /* FORZAR CENTRADO DEL HEADER */
        .navbar .container {
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            flex-direction: column !important;
            text-align: center !important;
        }

        .navbar-brand {
            margin: 0 auto !important;
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
        }

        .navbar-nav {
            margin: 10px auto !important;
            display: flex !important;
            justify-content: center !important;
        }

        .navbar-nav .nav-item {
            margin: 0 10px !important;
        }

        /* FORZAR CENTRADO DEL FOOTER */
        footer .container {
            text-align: center !important;
        }

        .footer-content {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
        }

        .footer-contact {
            display: flex !important;
            justify-content: center !important;
            gap: 2rem !important;
            margin: 1rem 0 !important;
        }

        .footer-links {
            display: flex !important;
            justify-content: center !important;
            gap: 1rem !important;
            margin: 1rem 0 !important;
        }
    </style>
</h:head>

<h:body class="d-flex flex-column min-vh-100">
    <!-- Header -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <b:link outcome="/index.xhtml" styleClass="navbar-brand">
                <h:graphicImage library="IMG" name="logo-biblio.png" 
                              style="height: 45px; width: auto; margin-right: 12px; border-radius: 4px; border: 2px solid #3498db;"/>
                <strong class="ms-2">Ediciones Saberum</strong>
            </b:link>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <b:navLink value="Inicio" outcome="/index.xhtml" styleClass="nav-link"/>
                    </li>
                    <li class="nav-item">
                        <b:navLink value="Catálogo" outcome="/catalogo.xhtml" styleClass="nav-link"/>
                    </li>
                    <li class="nav-item">
                        <b:navLink value="Panel Usuario" outcome="/panel-usuario.xhtml" 
                                  styleClass="nav-link"
                                  rendered="#{sessionController.authenticated and not sessionController.admin}"/>
                    </li>
                    <li class="nav-item">
                        <b:navLink value="Gestión" outcome="/gestion-usuarios.xhtml" 
                                  styleClass="nav-link"
                                  rendered="#{sessionController.admin}"/>
                    </li>
                </ul>
                
                <div class="navbar-nav ms-auto">
                    <h:panelGroup rendered="#{sessionController.authenticated}">
                        <span class="navbar-text text-light me-3">
                            <i class="fas fa-user me-1"></i>
                            #{sessionController.userName}
                            <span class="badge bg-light text-dark ms-1" rendered="#{sessionController.admin}">Admin</span>
                        </span>
                        <h:form style="display: inline;">
                            <b:commandButton value="Cerrar Sesión" 
                                             action="#{authController.logout}" 
                                             look="outline-light" 
                                             size="sm"/>
                        </h:form>
                    </h:panelGroup>
                    
                    <h:panelGroup rendered="#{not sessionController.authenticated}">
                        <h:form style="display: inline; margin-right: 10px;">
                            <b:commandButton value="Registrarse" 
                                             action="#{navigationController.goToRegistro}" 
                                             look="outline-info" 
                                             size="sm"/>
                        </h:form>
                        
                        <h:form style="display: inline;">
                            <b:commandButton value="Iniciar Sesión" 
                                             action="#{navigationController.goToLogin}" 
                                             look="success" 
                                             size="sm"/>
                        </h:form>
                    </h:panelGroup>
                </div>
            </div>
        </div>
    </nav>

    <!-- Contenido principal -->
    <main class="container-fluid flex-grow-1 py-4">
        <ui:insert name="content"/>
    </main>

    <!-- ✅ FOOTER COMPLETAMENTE CENTRADO - VERSIÓN DEFINITIVA -->
    <footer class="bg-dark text-white py-4 mt-auto">
        <div class="container footer-container">
            <div class="footer-main-content">
                <!-- Título y descripción -->
                <h5 class="mb-2" style="color: #3498db !important; font-weight: 600;">Ediciones Saberum</h5>
                <p class="mb-3" style="font-style: italic;">Ven, lee y saborea el conocimiento</p>
                
                <!-- Información de contacto -->
                <div class="footer-contact-info">
                    <span class="d-flex align-items-center">
                        <i class="fas fa-envelope me-2" style="color: #3498db;"></i>
                        info@saberum.edu
                    </span>
                    <span class="d-flex align-items-center">
                        <i class="fas fa-phone me-2" style="color: #3498db;"></i>
                        (01) 123-4567
                    </span>
                    <span class="d-flex align-items-center">
                        <i class="fas fa-map-marker-alt me-2" style="color: #3498db;"></i>
                        Lima, Perú
                    </span>
                </div>
                
                <!-- Enlaces rápidos -->
                <div class="footer-links-row">
                    <span class="separator-dot text-light">• </span>
                    <b:link value="Catálogo" outcome="/catalogo.xhtml" styleClass="text-light text-decoration-none"/>
                    <span class="separator-dot text-light">• </span>
                    <b:link value="Registro" outcome="/registro.xhtml" styleClass="text-light text-decoration-none"/>
                    <span class="separator-dot text-light">• </span>
                    <b:link value="Login" outcome="/login.xhtml" styleClass="text-light text-decoration-none"/> 
                </div>
                
                <!-- Copyright -->
                <div class="footer-copyright">
                    <p class="small text-light mb-0">
                        © 2025 Ediciones Saberum. Todos los derechos reservados.
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <h:outputScript library="webjars" name="jquery/3.7.1/jquery.min.js"/>
    <h:outputScript library="webjars" name="bootstrap/5.3.2/js/bootstrap.bundle.min.js"/>
    <h:outputScript name="js/app.js"/>
    
    <script>
        // ✅ FORZAR CENTRADO CON JAVASCRIPT (como respaldo)
        document.addEventListener('DOMContentLoaded', function() {
            // Forzar centrado del footer
            const footerContainer = document.querySelector('.footer-container');
            if (footerContainer) {
                footerContainer.style.display = 'flex';
                footerContainer.style.flexDirection = 'column';
                footerContainer.style.alignItems = 'center';
                footerContainer.style.justifyContent = 'center';
                footerContainer.style.textAlign = 'center';
            }
            
            // Forzar centrado del contenido del footer
            const footerContent = document.querySelector('.footer-main-content');
            if (footerContent) {
                footerContent.style.display = 'flex';
                footerContent.style.flexDirection = 'column';
                footerContent.style.alignItems = 'center';
                footerContent.style.justifyContent = 'center';
                footerContent.style.margin = '0 auto';
            }
        });
    </script>
</h:body>
</html>